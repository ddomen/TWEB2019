<?php
  $this->headScript()->appendFile($this->baseUrl('js/catalogo.js'));
  $cars = array();
  foreach($this->catalog as $car){ array_push($cars, $car->toArray()); }
  $cars = json_encode($cars);

  $this->headScript()->captureStart();
  echo "window.CARS = " . $cars . ";";
  $this->headScript()->captureEnd();
?>
<h1 align='center'><b>CATALOGO</b></h1>
<br>
<h3>Filtro Catalogo:</h3>
<div><?php echo $this->catalogForm ?></div>
<br>

<<<<<<< HEAD
=======

<div align='right'>
<div class="dropdown">
  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
    Ordina per &nbsp;
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1">
    <li><a href="<?=$this->url(array('controller' => $this->layout,
                                     'action' => 'catalog',
                                     'orderBy' => 'ASC_P'),'default',true);?>">Prezzo: crescente</a></li>
    <li><a href="<?=$this->url(array('controller' => $this->layout,
                                     'action' => 'catalog',
                                     'orderBy' => 'DESC_P'),'default',true);?>">Prezzo: decrescente</a></li>
    <li><a href="<?=$this->url(array('controller' => $this->layout,
                                     'action' => 'catalog',
                                     'orderBy' => 'ASC_S'),'default',true);?>">Posti: crescente</a></li>
    <li><a href="<?=$this->url(array('controller' => $this->layout,
                                     'action' => 'catalog',
                                     'orderBy' => 'DESC_S'),'default',true);?>">Posti: decrescente</a></li>
  </ul>
</div>
</div>

<br>

>>>>>>> 8dd2c5c410a86a3b6a81441569353f438f1d7d9d
<?=$this->pannelloNoleggio?>

<?php foreach($this->catalog as $car){ ?>

<div class="panel panel-default">
    <div class="panel-heading panel-primary"><h3><b><?=$car->Marca?> - <?=$car->Modello?></h3></b></div>
    <div class="panel-body">
    
        <div class="row">
        <div class="col-xs-6 col-sm-3"><?=$this->productImg($car->Foto, array('class' => 'img-responsive')) ?></div>
        <div class="col-xs-18 col-sm-9">
            <p style="float:left;">
              <input type="hidden" name="car" value="<?=$car->ID?>" />
              <?=$this->bottoneNoleggio?>


              <p><a href="<?=$this->url(array('controller' => $this->layout,
                                     'action' => 'editmacchina',
                                     'id' => $car->ID),'default',true);?>"><?=$this->bottoneModifica?></a></p>
 <br>             
              <p><a href="<?=$this->url(array('controller' => $this->layout,
                                     'action' => 'deletemacchina',
                                     'id' => $car->ID),'default',true);?>"><?=$this->bottoneElimina?></a></p>

              
            </p>
            <p><b><?=$this->productPrice($car) ?></b></p>
            <br>
            <p style="clear:left"><b>Posti: </b><?=$car->Posti?></p>
            <p><b>Allestimento: </b><?=$car->Allestimento?></p>
            <p><b>Targa: </b><?=$car->TARGA?></p>
        </div>

        <!-- Add the extra clearfix for only the required viewport -->
        <div class="clearfix visible-xs-block"></div>

        </div>
        
        
        
        
    </div>
</div>

<?php } ?>

<?php if($this->catalog instanceof Zend_Paginator) {
	  	echo $this->paginationControl($this->catalog,'Sliding','public/_paginator.phtml');
	  } 
?>


<div id="noleggio-modal" class="noleggio-modal modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header"><h4 class="modal-title">Noleggio Auto</h4></div>
      <div class="modal-body">
        <h3>Targa: <span class="noleggio-modal-targa"></span></h3>
        <h3>Modello: <span class="noleggio-modal-modello"></span></h3>
        <h3>Marca: <span class="noleggio-modal-marca"></span></h3>
        <h3>Prezzo: <span class="noleggio-modal-prezzo"></span></h3>
        <h3>Posti: <span class="noleggio-modal-posti"></span></h3>
        <h3>Allestimento: <span class="noleggio-modal-allestimento"></span></h3>
        <img src="" data-base="<?=$this->baseUrl('images/vetture/')?>" style="max-width: 200px; max-height: 200px;" class="noleggio-modal-foto" />
        <br/>
        <h4 class="message">Seleziona un periodo per noleggiare questa auto</h4>
        <div class="input-group noleggio-date-from">
          <span class="input-group-addon" id="basic-addon1">Data Inizio</span>
          <input type="number" class="form-control date-days" placeholder="GG" aria-describedby="basic-addon1" min="1" max="31">
          <input type="number" class="form-control date-months" placeholder="MM" aria-describedby="basic-addon1" min="1" max="12">
          <input type="number" class="form-control date-years" placeholder="YYYY" aria-describedby="basic-addon1" min="2018" max="2020">
        </div>
        <div class="input-group noleggio-date-to">
          <span class="input-group-addon" id="basic-addon1">Data Fine</span>
          <input type="number" class="form-control date-days" placeholder="GG" aria-describedby="basic-addon1" min="1" max="31">
          <input type="number" class="form-control date-months" placeholder="MM" aria-describedby="basic-addon1" min="1" max="12">
          <input type="number" class="form-control date-years" placeholder="YYYY" aria-describedby="basic-addon1" min="2018" max="2020">
        </div>
        <br/>
        <button type="button" class="btn btn-info noleggia-check-btn">Controlla Date</button>
        <div class="alert noleggio-modal-risposta" style="font-weight: bolder;"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success noleggia-btn" disabled>Noleggia</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal">Annulla</button>
      </div>
    </div>
  </div>
</div>

<?php

?>